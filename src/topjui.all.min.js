// topjui.combotree.js
!function(a){a.fn.iCombotree=function(b){var c={combotreeId:this.selector,url:ctx+"/system/codeItem/getListByCodesetidAndLevelid?codeSetId={codeSetId}&levelId={levelId}",expandUrl:ctx+"/system/codeItem/getListByPid",width:"",required:!1,lines:!0,multiple:!1,checkbox:!0,onlyLeafCheck:!1,editable:!1,readonly:!1,animate:!0,expandAll:!0,onBeforeSelect:function(c){if(b.onlyLeafCheck){var d=a(this).tree("isLeaf",c.target);if(!d)return a.messager.alert("提示操作！","请展开选择子节点！","warning"),!1}}};b=a.extend(c,b),b.url=-1==b.url.indexOf("codeSetId")?-1==b.url.indexOf("?")?b.url+"?codeSetId="+b.codeSetId+"&levelId="+b.levelId:b.url+"&codeSetId="+b.codeSetId+"&levelId="+b.levelId:b.url.replace("{codeSetId}",b.codeSetId).replace("{levelId}",b.levelId),""==b.combotreeId&&(b.combotreeId=a(this).context),a(this).combotree({url:b.url,width:b.width,required:b.required,lines:b.lines,multiple:b.multiple,checkbox:b.checkbox,onlyLeafCheck:b.onlyLeafCheck,editable:b.editable,readonly:b.readonly,animate:b.animate,onBeforeExpand:function(c){a(this).tree("options").url=b.expandUrl.replace("{pid}",c.id)},onBeforeSelect:b.onBeforeSelect,onLoadSuccess:function(){b.expandAll&&(a(b.combotreeId).combotree("tree"),a(b.combotreeId).combotree("tree").tree("expandAll"),a(b.combotreeId).combotree("tree").tree("expand",a(b.combotreeId).combotree("tree").tree("getRoot").target))},onSelect:function(){},onShowPanel:function(){}})}}(jQuery);

// topjui.function.js
function getTabWindow(){var a=null,b=parent.$("#index_tabs").tabs("getSelected");return b&&b.find("iframe").length>0&&(a=b.find("iframe")[0].contentWindow),a}function getDatetime(a){var i,b=new Date,c=b.getFullYear(),d=b.getMonth()+1<10?"0"+(b.getMonth()+1):month1,e=b.getDate()<10?"0"+b.getDate():b.getDate(),f=b.getHours()<10?"0"+b.getHours():b.getHours(),g=b.getMinutes()<10?"0"+b.getMinutes():b.getMinutes(),h=b.getSeconds()<10?"0"+b.getSeconds():b.getSeconds();return i="YmdHis"==a?c+""+d+e+f+g+h:"Y-m-d H:i:s"==a?c+"-"+d+"-"+e+" "+f+":"+g+":"+h:"Y-m-d H:i"==a?c+"-"+d+"-"+e+" "+f+":"+g:c+"-"+d+"-"+e}function getUrl(a){var b=window.location.pathname;return url="controller"==a?b.substring(0,b.lastIndexOf("/")+1):b}function getOptionsJson(a){var b=a.data();return b.options&&(b=0==b.options.indexOf("{")?$.parseJSON(b.options.replace(/'/g,'"')):strToJson("{"+b.options.replace(/'/g,'"')+"}")),b}function replaceUrlParamValueByBrace(a,b){var e,f,c=a.match(/{([\s\S]*?)}/g),d=a;if(c.length>0)for(e=0;e<c.length;e++)f=c[e].replace("{","").replace("}",""),d=d.replace(c[e],b[f]);return d}function getSelectedRowJson(a,b){var d,e,f,c={};if(a)for(d=a.split(","),e=0;e<d.length;e++)-1==d[e].indexOf(":")?c[d[e]]=b[d[e]]:(f=d[e].split(":"),c[f[0]]=b[f[1]]);return c}function addHandler(a){var d,b=getUrl("controller"),c={gridId:"datagrid",dialogId:"addDialog",dialogHref:a.dialogHref?a.dialogHref:b+"edit"};a=$.extend(c,a),d=$("#"+a.dialogId),d.dialog({title:"新增数据",iconCls:"icon-add",toolbar:"#"+a.dialogId+"-toolbar",buttons:"#"+a.dialogId+"-buttons"}),void 0!=a.dialogHref&&d.dialog("refresh",a.dialogHref),d.dialog("open"),setTimeout(function(){var b,c;getTabWindow().$("#"+a.dialogId+" iframe").each(function(){this.contentWindow.document.body.innerHTML=""}),a.parentGridId&&(b=$("#"+a.parentGridId).treegrid("getSelected")?$("#"+a.parentGridId).treegrid("getSelected"):$("#"+a.parentGridId).datagrid("getSelected"),c=getFormLoadJson(a.gridParam,b),d.form("load",c))},100)}function addChildHandler(a){var c,d,e,b=$("#"+a.parentGridId).treegrid("getSelected")?$("#"+a.parentGridId).treegrid("getSelected"):$("#"+a.parentGridId).datagrid("getSelected");b?(c=getUrl("controller"),d={gridId:"datagrid",dialogId:"addDialog",dialogHref:a.dialogHref?a.dialogHref:c+"edit"},a=$.extend(d,a),e=$("#"+a.dialogId),e.dialog({title:"新增数据",iconCls:"icon-add",toolbar:"#"+a.dialogId+"-toolbar",buttons:"#"+a.dialogId+"-buttons"}),void 0!=a.dialogHref&&e.dialog("refresh",a.dialogHref),e.dialog("open"),setTimeout(function(){var c,d,f;if(getTabWindow().$("#"+a.dialogId+" iframe").each(function(){this.contentWindow.document.body.innerHTML=""}),c={},a.gridParam)for(d=a.gridParam.split(","),f=0;f<d.length;f++)c[d[f]]=b[d[f]];c.puuid=b.uuid,e.form("load",c)},100)):$.messager.alert("提示操作！","请先选中要新增的主表数据！","warning")}function editHandler(a){var d,e,f,g,h,i,b=getUrl("controller"),c={gridId:"datagrid",dialogId:"editDialog",dialogHref:a.dialogHref?a.dialogHref:b+"edit",dialogUrl:a.dialogUrl?a.dialogUrl:b+"getDetailByUuid?uuid={uuid}"};if(a=$.extend(c,a),d=$("#"+a.dialogId),d.dialog({title:"编辑数据",iconCls:"icon-save",toolbar:"#"+a.dialogId+"-toolbar",buttons:"#"+a.dialogId+"-buttons"}),a.datagridId?(f=a.datagridId,e=$("#"+f).datagrid("getSelections")):a.treegridId&&(f=a.treegridId,e=$("#"+f).treegrid("getSelections")),e)if(e.length>1)$.messager.alert("提示操作！","只能选择一条数据！","warning");else if(1==e.length){for(d.dialog("refresh",a.dialogHref),d.dialog("open"),g=a.dialogUrl.match(/{([\s\S]*?)}/g),h=0;h<g.length;h++)i=g[h].replace("{","").replace("}",""),a.dialogUrl=a.dialogUrl.replace(g[h],e[0][i]);$.ajax({url:a.dialogUrl,type:"post",dataType:"json",async:!1,success:function(b){b?setTimeout(function(){var c,e,f;if("string"==typeof a.dialogEditor)for(c=[],e=[],c=a.dialogEditor.replace(/'/g,'"').split(","),f=0;f<c.length;f++)e.push(strToJson(c[f]));else e=a.dialogEditor;getTabWindow().$("#"+a.dialogId+" iframe").each(function(a){this.contentWindow.document.body.innerHTML=html_decode(b[e[a]["field"]])}),d.form("load",b)},100):$.messager.alert("获取失败！","未知错误导致失败，请重试！","warning")}})}else 0==e.length&&$.messager.alert("提示操作！","请先选中要编辑的数据！","warning")}function deleteHandler(a){var d,e,b=getUrl("controller"),c={gridId:"datagrid",url:a.dialogUrl?a.dialogUrl:b+"delete"};a=$.extend(c,a),a.datagridId?(e=a.datagridId,d=$("#"+e).datagrid("getSelections")):a.treegridId&&(e=a.treegridId,d=$("#"+e).treegrid("getSelections")),d.length>0?$.messager.confirm("确定操作","您确定要删除所选的记录吗？",function(b){var c,f;if(b){for(c=[],f=0;f<d.length;f++)c.push("'"+d[f].uuid+"'");a.formData={uuids:c.join(",")},doAjax(a)&&(a.datagridId?($("#"+e).datagrid("reload"),$("#"+e).datagrid("unselectAll")):a.treegridId&&($("#"+e).treegrid("reload"),$("#"+e).treegrid("unselectAll")))}}):$.messager.alert("提示操作","请选择要删除的记录！","info")}function searchHandler(a){var b;a.datagridId?(b=a.datagridId,$(".datagrid-filter-row").length>0?$("#"+b).datagrid("disableFilter",a.filterOption):$("#"+b).datagrid("enableFilter",a.filterOption)):a.treegridId&&(b=a.treegridId,$(".datagrid-filter-row").length>0?$("#"+b).datagrid("disableFilter",a.filterOption):$("#"+b).datagrid("enableFilter",a.filterOption))}function advanceSearchHandler(a){var d,e,f,g,h,j,b=[],c=[];if(a.datagridId)for(d=a.datagridId,e="datagrid",b=$("#"+d).datagrid("getColumnFields"),i=0;i<b.length;i++)f=$("#"+d).datagrid("getColumnOption",b[i]),c.push(f.title);else if(a.treegridId)for(d=a.treegridId,e="treegrid",b=$("#"+d).treegrid("getColumnFields"),i=0;i<b.length;i++)f=$("#"+d).treegrid("getColumnOption",b[i]),c.push(f.title);g=c.join(",").replace("UUID,","").replace(/,操作/g,"").replace(/操作,/g,""),h=b.join(",").replace("uuid,","").replace(/,handle/g,"").replace(/handle,/g,""),$.cookie("advanceSearchGridId",d),$.cookie("advanceSearchGridType",e),$.cookie("colNameStr",g),$.cookie("fieldNameStr",h),j=$("#"+a.dialogId),j.dialog({title:"高级查询",iconCls:"icon-find",toolbar:"#"+a.dialogId+"-toolbar",buttons:"#"+a.dialogId+"-buttons"}),j.dialog("open")}function importHandler(){$(this).trigger(topJUI.eventType.initCombotree),$("#importDialog").dialog("open")}function exportHandler(a){var d,e,f,g,h,j,b=getUrl("controller"),c={gridId:"datagrid",url:"/system/index/requestSuccess",excelTitle:parent.$("#index_tabs").tabs("getSelected").panel("options").title+"_导出数据_"+getDatetime("YmdHis"),exportUrl:a.exportUrl?a.exportUrl:b+"exportExcel"};if(a=$.extend(c,a),f=[],a.datagridId)for(d=a.datagridId,e=$("#"+d).datagrid("getColumnFields"),i=0;i<e.length;i++)g=$("#"+d).datagrid("getColumnOption",e[i]),f.push(g.title);else if(a.treegridId)for(d=a.treegridId,e=$("#"+d).treegrid("getColumnFields"),i=0;i<e.length;i++)g=$("#"+d).treegrid("getColumnOption",e[i]),f.push(g.title);h=f.join(",").replace("UUID,","").replace(/,操作/g,"").replace(/操作,/g,""),j=e.join(",").replace("uuid,","").replace(/,handle/g,"").replace(/handle,/g,""),a.formData={excelTitle:a.excelTitle,colName:h,fieldName:j},doAjax(a)&&(window.location.href=a.exportUrl+"?excelTitle="+a.excelTitle+"&colName="+h+"&fieldName="+j)}function redoHandler(){$(options.gridId).datagrid("rejectChanges"),$(options.gridId).datagrid("unselectAll")}function doAjax(a){var b;return $.ajax({url:a.url,type:"post",data:a.formData,dataType:"json",async:!1,contentType:"application/x-www-form-urlencoded;charset=utf-8",beforeSend:function(){$.messager.progress({text:"正在操作..."})},success:function(a){$.messager.progress("close"),showMessage(a),b=1==a.statusCode||100==a.statusCode||200==a.statusCode?!0:!1}}),b}function strToJson(str){var json=eval("("+str+")");return json}function setDialogHrefKeyValue(a,b,c){var d=b.split(","),e=c.split(","),f=$(a).dialog("options").href,g="";for(i=0;i<d.length;i++)f.indexOf("?")>0?-1==f.indexOf(d[i]+"="+e[i])&&(g+="&"+d[i]+"="+e[i]):0==i?g="?"+d[i]+"="+e[i]:g+="&"+d[i]+"="+e[i];$(a).dialog("options").href=f+g}function clearDialogHrefKeyValue(a,b){var e,f,g,h,k,l,c=b.split(","),d=$(a).dialog("options").href;if(d.indexOf("?")>0){for(e="",f=d.substring(0,d.indexOf("?")+1),g=d.substring(d.indexOf("?")+1),h=g.split("&"),i=0;i<h.length;i++)for(j=0;j<c.length;j++)h[i].indexOf(c[j]+"=")>=0&&h.remove(i);1==h.length?e=h[0]:h.length>1&&(e=h.join("&")),k="",k=f+e,l=k.substring(k.length-1),"?"==l&&(k=k.substring(0,k.length-1))}else k=d;$(a).dialog("options").href=k}function msgFn(a){var d,e,b={},c="";"object"==typeof a?(c=a.code,b={title:a.title,msg:a.msg}):(c=a,b=1==a?{title:"温馨提示",msg:"操作成功"}:{title:"温馨提示",msg:"操作失败！未知错误，请重试！"}),1==c||100==c||200==c?(1==c||200==c?$.messager.show(b):$.messager.alert(b),$(options.currentDialogId).dialog("close").form("reset"),$(options.gridId).datagrid("reload"),options.refreshTreeId&&(d=$(options.refreshTreeId).tree("getSelected"),e=$(options.refreshTreeId).tree("getParent",d.target),$(options.refreshTreeId).tree("reload",e.target))):$.messager.alert(b)}function showMessage(a){var b={},c="";"object"==typeof a?(c=a.statusCode,b={title:a.title,msg:a.message}):(c=a,b=1==a?{title:"温馨提示",msg:"操作成功"}:{title:"温馨提示",msg:"操作失败，请重试！"}),1==c||100==c||200==c?1==c||200==c?$.messager.show(b):$.messager.alert(b):$.messager.alert(b)}subString=function(a,b,c){return void 0!=a?a.substring(b,c):""},addParentTab=function(a,b){var c='<iframe src="'+a+'" frameborder="0" style="border:0;width:100%;height:98%;"></iframe>';parent.$("#index_tabs").tabs("add",{title:b,content:c,closable:!0,iconCls:"icon-page"})},openDialog=function(a){var b={dialogId:"testDialog",title:"新增数据",href:"",url:"",width:600,height:400,btnText:"新增"};a=$.extend(b,a),$("#"+a.dialogId).dialog({title:a.title,href:a.href,width:a.width,height:a.height,buttons:[{text:a.btnText,iconCls:"icon-add",handler:function(){if($(this).form("validate")){var b=$("#"+a.dialogId).serialize();$.ajax({url:a.url,type:"post",data:b,beforeSend:function(){$.messager.progress({text:"正在操作..."})},success:function(a){$.messager.progress("close"),msgFn(a)}})}}},{text:"取消",iconCls:"icon-cancel",handler:function(){$("#"+a.dialogId).dialog("close").form("reset")}}],onLoad:function(){$(this).trigger(topJUI.eventType.initUI.form)}})},Array.prototype.remove=function(a){if(isNaN(a)||a>this.length)return!1;for(var b=0,c=0;b<this.length;b++)this[b]!=this[a]&&(this[c++]=this[b]);this.length-=1};

// topjui.core.js
var topJUI={eventType:{initUI:{base:"topjui.initUI.base",form:"topjui.initUI.form",advanceSearchForm:"topjui.initUI.advanceSearchForm"},beforeInitUI:"topjui.beforeInitUI",afterInitUI:"topjui.afterInitUI",ajaxStatus:"topjui.ajaxStatus",resizeGrid:"topjui.resizeGrid",beforeAjaxLoad:"topjui.beforeAjaxLoad",beforeLoadNavtab:"topjui.beforeLoadNavtab",beforeLoadDialog:"topjui.beforeLoadDialog",afterLoadNavtab:"topjui.afterLoadNavtab",afterLoadDialog:"topjui.afterLoadDialog",beforeCloseNavtab:"topjui.beforeCloseNavtab",beforeCloseDialog:"topjui.beforeCloseDialog",afterCloseNavtab:"topjui.afterCloseNavtab",afterCloseDialog:"topjui.afterCloseDialog"}};

// topjui.datagrid-filter.js
!function(a){a.fn.iDatagrid=function(b){function d(){var c=a(b.datagridId).datagrid("getSelected"),d=a(b.datagridId).datagrid("getRowIndex",c);f(d,"up",b.datagridId)}function e(){var c=a(b.datagridId).datagrid("getSelected"),d=a(b.datagridId).datagrid("getRowIndex",c);f(d,"down",b.datagridId)}function f(b,c,d){var e,f,g;"up"==c?0!=b&&(e=a(d).datagrid("getData").rows[b],f=a(d).datagrid("getData").rows[b-1],a(d).datagrid("getData").rows[b]=f,a(d).datagrid("getData").rows[b-1]=e,a(d).datagrid("refreshRow",b),a(d).datagrid("refreshRow",b-1),a(d).datagrid("selectRow",b-1)):"down"==c&&(g=a(d).datagrid("getRows").length,b!=g-1&&(f=a(d).datagrid("getData").rows[b],e=a(d).datagrid("getData").rows[b+1],a(d).datagrid("getData").rows[b+1]=f,a(d).datagrid("getData").rows[b]=e,a(d).datagrid("refreshRow",b),a(d).datagrid("refreshRow",b+1),a(d).datagrid("selectRow",b+1)))}var c={datagridId:this.selector,width:"100%",height:"100%",autoRowHeight:!1,nowrap:!0,fit:!0,fitColumns:!0,border:!1,striped:!0,singleSelect:!1,url:"",columns:[[{field:"id",title:"ID",align:"center"},{field:"title",title:"标题",align:"left"},{field:"creator",title:"发布人",align:"center"},{field:"createTime",title:"发布时间",align:"center"}]],sortName:"createTime",sortOrder:"desc",loadMsg:"数据加载中,请稍后...",rownumbers:!0,pagination:!0,pageNumber:1,pageSize:20,pageList:[10,20,30,40,50],editable:!0,queryFormId:"",queryAction:"",infoFormId:"",infoAddAction:"",infoUpdateAction:"",infoDlgDivId:"",deleteAction:"",deleteMsg:"",moveDlgDivId:"",moveFormId:"",moveTreeId:"",queryParams:{},queryParamsVCN:{}};b=a.extend(c,b),a(this).datagrid({width:b.width,height:b.height,autoRowHeight:b.autoRowHeight,nowrap:b.nowrap,striped:b.striped,singleSelect:b.singleSelect,url:b.datagridUrl,loadMsg:b.loadMsg,rownumbers:b.rownumbers,pagination:b.pagination,paginPosition:"bottom",pageNumber:b.pageNumber,pageSize:b.pageSize,pageList:b.pageList,columns:b.columns,sortName:b.sortName,sortOrder:b.sortOrder,fit:b.fit,fitColumns:b.fitColumns,border:b.border,onLoadSuccess:function(){a(this).datagrid("fixRownumber")},toolbar:[{text:"添加",iconCls:"icon-add",handler:function(){a(b.addDialogId).dialog("open").form("reset")}},"-",{text:"修改",iconCls:"icon-edit",handler:function(){if(b){var c=a(b.datagridId).datagrid("getSelections");c.length>1?a.messager.alert("提示操作！","编辑数据只能选择一条记录！","warning"):1==c.length?a.ajax({url:b.getDetailUrl,type:"post",dataType:"json",data:{uuid:c[0].uuid},beforeSend:function(){a.messager.progress({text:"正在获取中..."})},success:function(c){if(a.messager.progress("close"),c){var f="{";a.each(b.editFields,function(a,b){f+='"'+b+'": "'+c[b.replace("Edit","")]+'", '}),f+='"endStr": "1"}',console.log(f),a(b.editDialogId).dialog("open"),setTimeout(function(){a(b.editDialogId).form("load",a.parseJSON(f))},100)}else a.messager.alert("获取失败！","未知错误导致失败，请重试！","warning")}}):0==c.length&&a.messager.alert("提示操作！","编辑数据请至少选择一条记录！","warning")}}},"-",{text:"保存",iconCls:"icon-save",handler:function(){var c,d;a(b.datagridId).datagrid("endEdit",editRow),c=a(b.datagridId).datagrid("getChanges"),console.log(c[0]),void 0==c[0]?a.messager.alert("操作失败！","未知错误或没有任何修改，请重试！","warning"):(d=null,d=void 0==c[0]["uuid"]?b.saveUrl:b.updateUrl,a.ajax({url:d,type:"post",data:c[0],beforeSend:function(){a.messager.progress({text:"正在操作..."})},success:function(c){a.messager.progress("close"),c>0?(a.messager.show({title:"提示",msg:"操作成功"}),a(b.datagridId).datagrid("reload")):a.messager.alert("操作失败！","未知错误或没有任何修改，请重试！","warning")}}))}},"-",{text:"删除",iconCls:"icon-no",handler:function(){if(b){var c=a(b.datagridId).datagrid("getSelections");c.length>0?a.messager.confirm("确定操作","您确定要删除所选的记录吗？",function(d){var e,f;if(d){for(e=[],f=0;f<c.length;f++)e.push("'"+c[f].uuid+"'");a.ajax({type:"POST",url:b.deleteUrl,data:{uuids:e.join(",")},beforeSend:function(){a(b.datagridId).datagrid("loading")},success:function(c){c&&(a(b.datagridId).datagrid("loaded"),a(b.datagridId).datagrid("load"),a(b.datagridId).datagrid("unselectAll"),a.messager.show({title:"温馨提示",msg:"成功删除【"+c+"】条记录！"}))}})}}):a.messager.alert("提示操作","请选择要删除的记录！","info")}}},"-",{text:"撤销",iconCls:"icon-redo",handler:function(){editRow=void 0,a(b.datagridId).datagrid("rejectChanges"),a(b.datagridId).datagrid("unselectAll")}},"-",{text:"上移",iconCls:"icon-up",handler:function(){d()}},"-",{text:"下移",iconCls:"icon-down",handler:function(){e()}}]})},a.extend(a.fn.datagrid.methods,{fixRownumber:function(b){return b.each(function(){var d,b=a(this).datagrid("getPanel"),c=a(".datagrid-cell-rownumber",b).last().clone();c.css({position:"absolute",left:-1e3}).appendTo("body"),d=c.width("auto").width(),d>25?(a(".datagrid-header-rownumber,.datagrid-cell-rownumber",b).width(d+5),a(this).datagrid("resize"),c.remove(),c=null):a(".datagrid-header-rownumber,.datagrid-cell-rownumber",b).removeAttr("style")})}})}(jQuery);

// topjui.datagrid.js
!function($){$.fn.iDatagrid=function(a){function e(){if(a){var b=$(a.datagridId).datagrid("getSelections");b.length>1?$.messager.alert("提示操作！","编辑数据只能选择一条记录！","warning"):1==b.length?(clearDialogHrefKeyValue(a.editDialogId,"uuid"),setDialogHrefKeyValue(a.editDialogId,"action,uuid","edit,"+b[0].uuid),$.ajax({url:a.getDetailUrl+"?uuid="+b[0].uuid,type:"post",dataType:"json",async:!1,beforeSend:function(){},success:function(b){if($.messager.progress("close"),b){var e=$(a.editDialogId).dialog("options").href+"&abc=213";console.log($(a.editDialogId).dialog("options").href),$(a.editDialogId).dialog("open").dialog("refresh",e),setTimeout(function(){$(a.editDialogId).form("load",b),$(a.editDialogId).dialog("setTitle",a.editDialogTitle),$("#addBtn").hide(),$("#saveBtn").show(),a.processUpdateUrl||$("#processBtn").hide()},200),setTimeout(function(){var c,d,e,f;if("string"==typeof a.kindEditor)for(c=[],d=[],c=a.kindEditor.replace(/'/g,'"').split(","),e=0;e<c.length;e++)d.push(strToJson(c[e]));else d=a.kindEditor;if(getTabWindow().$("iframe").each(function(a){this.contentWindow.document.body.innerHTML=html_decode(b[d[a]["field"]])}),$(".attachTable").length>0)for($(".attachTable tr:gt(0)").remove(),e=0;e<b.attach.length;e++)f=b.attach[e],$(".attachTable").append('<tr><td class="label">'+f.fileName+'</td><td class="label">'+f.fileSize+'</td><td class="label">'+f.creator+'</td><td class="label">'+f.createTime+"</td></tr>")},500)}else $.messager.alert("获取失败！","未知错误导致失败，请重试！","warning")}})):0==b.length&&$.messager.alert("提示操作！","编辑数据请至少选择一条记录！","warning")}}var c,d,b={datagridId:this.selector,width:"100%",height:"100%",autoRowHeight:!1,nowrap:!0,fit:!0,fitColumns:!1,border:!1,striped:!0,singleSelect:!0,url:"",columns:[[{field:"uuid",title:"UUID",align:"center"},{field:"title",title:"标题",align:"left"},{field:"creator",title:"发布人",align:"center"},{field:"createTime",title:"发布时间",align:"center"}]],sortName:"createTime",sortOrder:"desc",addButton:!0,editButton:!0,deleteButton:!0,searchButton:!0,addDialogTitle:"新增",editDialogTitle:"编辑",loadMsg:"数据加载中,请稍后...",rownumbers:!0,pagination:!0,pageNumber:1,pageSize:20,pageList:[10,20,30,40,50],editable:!0,queryFormId:"",queryAction:"",infoFormId:"",infoAddAction:"",infoUpdateAction:"",infoDlgDivId:"",deleteAction:"",deleteMsg:"",moveDlgDivId:"",moveFormId:"",moveTreeId:"",queryParams:{},queryParamsVCN:{},kindEditor:[],addDialogId:"#editDialog",editDialogId:"#editDialog"};a=$.extend(b,a),c=window.location.pathname,d=c.substring(0,c.lastIndexOf("/")+1),a.datagridUrl=a.datagridUrl?a.datagridUrl:d+"getPageSetData",a.getDetailUrl=a.getDetailUrl?a.getDetailUrl:d+"getDetailByUuid",a.addDialogHref=a.addDialogHref?a.addDialogHref:d+"add",a.saveUrl=a.saveUrl?a.saveUrl:d+"save",a.editDialogHref=a.editDialogHref?a.editDialogHref:d+"edit",a.updateUrl=a.updateUrl?a.updateUrl:d+"update",a.deleteUrl=a.deleteUrl?a.deleteUrl:d+"delete",$(this).datagrid({filterBtnIconCls:"icon-filter",remoteFilter:!0,width:a.width,height:a.height,autoRowHeight:a.autoRowHeight,nowrap:a.nowrap,striped:a.striped,singleSelect:a.singleSelect,url:a.datagridUrl+location.search,loadMsg:a.loadMsg,rownumbers:a.rownumbers,pagination:a.pagination,paginPosition:"bottom",pageNumber:a.pageNumber,pageSize:a.pageSize,pageList:a.pageList,columns:a.columns,sortName:a.sortName,sortOrder:a.sortOrder,fit:a.fit,fitColumns:a.fitColumns,border:a.border,onBeforeLoad:function(){$.get(ctx+"/system/authAccess/getDetailByRoleIdAndUrl",function(b){(1!=b.addAuth||0==a.addButton)&&$(a.datagridId).datagrid("removeToolbarItem","添加"),(1!=b.editAuth||0==a.editButton)&&$(a.datagridId).datagrid("removeToolbarItem","修改"),(1!=b.deleteAuth||0==a.deleteButton)&&$(a.datagridId).datagrid("removeToolbarItem","删除"),(1!=b.searchAuth||0==a.searchButton)&&$(a.datagridId).datagrid("removeToolbarItem","查询"),(1!=b.importAuth||0==a.importButton)&&$(a.datagridId).datagrid("removeToolbarItem","导入"),(1!=b.exportAuth||0==a.exportButton)&&$(a.datagridId).datagrid("removeToolbarItem","导出")},"json")},onLoadSuccess:function(){$(this).datagrid("fixRownumber")},onClickRow:function(b,c){var d,e;a.refreshChildDatagrid&&(d=$(a.childDatagridId),e=d.datagrid("options").queryParams,queryParams2=a.queryParams,queryParams2.codeSetId=c.id,d.datagrid("options").queryParams=$.extend({},e,queryParams2),d.datagrid("reload"))},onDblClickRow:e,toolbar:[{id:"addButton",text:"添加",iconCls:"icon-add",handler:function(){clearDialogHrefKeyValue(a.addDialogId,"action,uuid"),$(a.addDialogId).dialog("open").form("reset"),setTimeout(function(){var b;if($(a.addDialogId).dialog("setTitle",a.addDialogTitle),$("#addBtn").show(),$("#saveBtn").hide(),$("#processBtn").hide(),a.kindEditor.length>0)for(b=0;b<a.kindEditor.length;b++)for(c in a.kindEditor[b])document.getElementsByTagName("iframe")[b].contentWindow.document.body.innerHTML=""},300)}},{text:"修改",iconCls:"icon-edit",handler:e},{text:"删除",iconCls:"icon-no",handler:function(){if(a){var b=$(a.datagridId).datagrid("getSelections");b.length>0?$.messager.confirm("确定操作","您确定要删除所选的记录吗？",function(c){var d,e;if(c){for(d=[],e=0;e<b.length;e++)d.push("'"+b[e].uuid+"'");$.ajax({type:"POST",url:a.deleteUrl,data:{uuids:d.join(",")},beforeSend:function(){$(a.datagridId).datagrid("loading")},success:function(b){b&&($(a.datagridId).datagrid("loaded"),$(a.datagridId).datagrid("load"),$(a.datagridId).datagrid("unselectAll"),$.messager.show({title:"温馨提示",msg:"成功删除【"+b+"】条记录！"}))}})}}):$.messager.alert("提示操作","请选择要删除的记录！","info")}}},{text:"查询",iconCls:"icon-search",handler:function(){$(".datagrid-filter-row").length>0?$(a.datagridId).datagrid("disableFilter",a.filterOption):$(a.datagridId).datagrid("enableFilter",a.filterOption)}},{id:"importButton",text:"导入",iconCls:"icon-table-add",handler:function(){$(this).trigger(topJUI.eventType.initCombotree),$("#importDialog").dialog("open")}},{id:"exportButton",text:"导出",iconCls:"icon-table_go",handler:function(){var f,g,h,j,b=new Date,c=parent.$("#index_tabs").tabs("getSelected").panel("options").title+"_导出数据_"+b.toLocaleString(),d=$(a.datagridId).datagrid("getColumnFields"),e=[];for(i=0;i<d.length;i++)f=$(a.datagridId).datagrid("getColumnOption",d[i]),e.push(f.title);g=a.datagridUrl.substring(0,a.datagridUrl.lastIndexOf("/"))+"/exportExcel",h=e.join(",").replace("UUID,","").replace(/,操作/g,"").replace(/操作,/g,""),j=d.join(",").replace("uuid,","").replace(/,handle/g,"").replace(/handle,/g,""),$.ajax({type:"POST",url:g,data:{excelTitle:c,colName:h,fieldName:j},success:function(a){a&&(window.location.href=g+"?excelTitle="+c+"&colName="+h+"&fieldName="+j,$.messager.show({title:"温馨提示",msg:"导出请求已发出，请稍后！"}))}})}},{text:"撤销",iconCls:"icon-redo",handler:function(){editRow=void 0,$(a.datagridId).datagrid("rejectChanges"),$(a.datagridId).datagrid("unselectAll")}}]})},$.extend($.fn.datagrid.methods,{fixRownumber:function(a){return a.each(function(){var c,a=$(this).datagrid("getPanel"),b=$(".datagrid-cell-rownumber",a).last().clone();b.css({position:"absolute",left:-1e3}).appendTo("body"),c=b.width("auto").width(),c>25?($(".datagrid-header-rownumber,.datagrid-cell-rownumber",a).width(c+5),$(this).datagrid("resize"),b.remove(),b=null):$(".datagrid-header-rownumber,.datagrid-cell-rownumber",a).removeAttr("style")})},addToolbarItem:function(jq,items){return jq.each(function(){var tr,i,btn,td,b,dpanel=$(this),toolbar=dpanel.children("div.datagrid-toolbar");for(toolbar.length||(toolbar=$('<div class="datagrid-toolbar"><table cellspacing="0" cellpadding="0"><tr></tr></table></div>').prependTo(dpanel),$(this).datagrid("resize")),tr=toolbar.find("tr"),i=0;i<items.length;i++)btn=items[i],"-"==btn?$('<td><div class="datagrid-btn-separator"></div></td>').appendTo(tr):(td=$("<td></td>").appendTo(tr),b=$('<a href="javascript:void(0)"></a>').appendTo(td),b[0].onclick=eval(btn.handler||function(){}),b.linkbutton($.extend({},btn,{plain:!0})))})},removeToolbarItem:function(a,b){return a.each(function(){var a=$(this).datagrid("getPanel"),c=a.children("div.datagrid-toolbar"),d=null;"number"==typeof b?d=c.find("td").eq(b).find("span.l-btn-text"):"string"==typeof b&&(d=c.find("span.l-btn-text:contains('"+b+"')")),d&&d.length>0&&(d.closest("td").remove(),d=null)})}})}(jQuery);

// topjui.datagrid2.js
!function($){$.fn.iDatagrid2=function(a){var c,b={datagridId:this.selector,width:"100%",height:"100%",autoRowHeight:!1,nowrap:!0,fit:!0,fitColumns:!1,border:!1,striped:!0,singleSelect:!0,url:"",toolbar:this.selector+"-toolbar",columns:[[{field:"uuid",title:"UUID",align:"center"},{field:"title",title:"标题",align:"left"},{field:"creator",title:"发布人",align:"center"},{field:"createTime",title:"发布时间",align:"center"}]],sortName:"createTime",sortOrder:"desc",addButton:!0,editButton:!0,deleteButton:!0,searchButton:!0,addDialogTitle:"新增",editDialogTitle:"编辑",loadMsg:"数据加载中,请稍后...",rownumbers:!0,pagination:!0,pageNumber:1,pageSize:20,pageList:[10,20,30,40,50],editable:!0,queryFormId:"",queryAction:"",infoFormId:"",infoAddAction:"",infoUpdateAction:"",infoDlgDivId:"",deleteAction:"",deleteMsg:"",moveDlgDivId:"",moveFormId:"",moveTreeId:"",queryParams:{},queryParamsVCN:{},kindEditor:[],addDialogId:"#editDialog",editDialogId:"#editDialog",gridParam:"uuid"};a=$.extend(b,a),c=getUrl("controller"),a.url=a.url?a.url:c+"getPageSetData",a.getDetailUrl=a.getDetailUrl?a.getDetailUrl:c+"getDetailByUuid",a.addDialogHref=a.addDialogHref?a.addDialogHref:c+"add",a.saveUrl=a.saveUrl?a.saveUrl:c+"save",a.editDialogHref=a.editDialogHref?a.editDialogHref:c+"edit",a.updateUrl=a.updateUrl?a.updateUrl:c+"update",a.deleteUrl=a.deleteUrl?a.deleteUrl:c+"delete",$(this).datagrid({filterBtnIconCls:"icon-filter",remoteFilter:!0,width:a.width,height:a.height,autoRowHeight:a.autoRowHeight,nowrap:a.nowrap,striped:a.striped,singleSelect:a.singleSelect,url:a.url+location.search,toolbar:a.toolbar,loadMsg:a.loadMsg,rownumbers:a.rownumbers,pagination:a.pagination,paginPosition:"bottom",pageNumber:a.pageNumber,pageSize:a.pageSize,pageList:a.pageList,columns:a.columns,sortName:a.sortName,sortOrder:a.sortOrder,fit:a.fit,fitColumns:a.fitColumns,border:a.border,onBeforeLoad:function(){$.get(ctx+"/system/authAccess/getDetailByRoleIdAndUrl",function(b){(1!=b.addAuth||0==a.addButton)&&$(a.datagridId).datagrid("removeToolbarItem","添加"),(1!=b.editAuth||0==a.editButton)&&$(a.datagridId).datagrid("removeToolbarItem","修改"),(1!=b.deleteAuth||0==a.deleteButton)&&$(a.datagridId).datagrid("removeToolbarItem","删除"),(1!=b.searchAuth||0==a.searchButton)&&$(a.datagridId).datagrid("removeToolbarItem","查询"),(1!=b.importAuth||0==a.importButton)&&$(a.datagridId).datagrid("removeToolbarItem","导入"),(1!=b.exportAuth||0==a.exportButton)&&$(a.datagridId).datagrid("removeToolbarItem","导出")},"json")},onLoadSuccess:function(){$(this).datagrid("fixRownumber")},onClickRow:function(b,c){var d,e,f,g,h,i,j;if(a.refreshDatagridId)for(d=a.refreshDatagridId.split(","),e={},f=0;f<d.length;f++)g=$("#"+d[f]),h=g.datagrid("options").queryParams,a.gridParam&&(e=getSelectedRowJson(a.gridParam,c)),g.datagrid("options").queryParams=$.extend({},h,e),g.datagrid("load");else if(a.refreshTreegridId)for(i=a.refreshTreegridId.split(","),f=0;f<i.length;f++)j=$("#"+i[f]),h=j.treegrid("options").queryParams,a.gridParam&&(e=getSelectedRowJson(a.gridParam,c)),j.treegrid("options").queryParams=$.extend({},h,e),j.treegrid("load")}})},$.extend($.fn.datagrid.methods,{fixRownumber:function(a){return a.each(function(){var c,a=$(this).datagrid("getPanel"),b=$(".datagrid-cell-rownumber",a).last().clone();b.css({position:"absolute",left:-1e3}).appendTo("body"),c=b.width("auto").width(),c>25?($(".datagrid-header-rownumber,.datagrid-cell-rownumber",a).width(c+5),$(this).datagrid("resize"),b.remove(),b=null):$(".datagrid-header-rownumber,.datagrid-cell-rownumber",a).removeAttr("style")})},addToolbarItem:function(jq,items){return jq.each(function(){var tr,i,btn,td,b,dpanel=$(this),toolbar=dpanel.children("div.datagrid-toolbar");for(toolbar.length||(toolbar=$('<div class="datagrid-toolbar"><table cellspacing="0" cellpadding="0"><tr></tr></table></div>').prependTo(dpanel),$(this).datagrid("resize")),tr=toolbar.find("tr"),i=0;i<items.length;i++)btn=items[i],"-"==btn?$('<td><div class="datagrid-btn-separator"></div></td>').appendTo(tr):(td=$("<td></td>").appendTo(tr),b=$('<a href="javascript:void(0)"></a>').appendTo(td),b[0].onclick=eval(btn.handler||function(){}),b.linkbutton($.extend({},btn,{plain:!0})))})},removeToolbarItem:function(a,b){return a.each(function(){var a=$(this).datagrid("getPanel"),c=a.children("div.datagrid-toolbar"),d=null;"number"==typeof b?d=c.find("td").eq(b).find("span.l-btn-text"):"string"==typeof b&&(d=c.find("span.l-btn-text:contains('"+b+"')")),d&&d.length>0&&(d.closest("td").remove(),d=null)})}})}(jQuery);

// topjui.dialog.js
!function(a){a.fn.iDialog=function(b){function f(b,c,d,e,f,g){a(".dialog-button > a").each(function(h){switch(h%6){case 0:b?a(this).show():a(this).hide();break;case 1:c?a(this).show():a(this).hide();break;case 2:d?a(this).show():a(this).hide();break;case 3:e?a(this).show():a(this).hide();break;case 4:f?a(this).show():a(this).hide();break;case 5:g?a(this).show():a(this).hide()}})}var d,e,c={currentDialogId:this.selector,width:600,height:400,title:"修改管理",modal:!1,closed:!0,iconCls:"icon-save",collapsible:!0,maximizable:!0,minimizable:!1,maximized:!1,openAnimation:"show",openDuration:600,postfix:"Edit",combotreeFields:"",refreshTreeId:"",datagridId:"#datagrid"};b=a.extend(c,b),d=window.location.pathname,e=d.substring(0,d.lastIndexOf("/")+1),b.getDetailUrl=b.getDetailUrl?b.getDetailUrl:e+"getDetailByUuid",b.addHref=b.href?b.href+location.search:e+"add"+location.search,b.saveUrl=b.saveUrl?b.saveUrl:e+"save",b.editHref=b.href?b.href+location.search:e+"edit"+location.search,b.updateUrl=b.updateUrl?b.updateUrl:e+"update",b.processUpdateUrl=b.processUpdateUrl?b.processUpdateUrl:e+"processUpdate",b.processRollBackUrl=b.processRollBackUrl?b.processRollBackUrl:e+"processRollBackUrl",b.href=b.editHref,""==b.currentDialogId&&(b.currentDialogId=b.id),-1==b.currentDialogId.indexOf("#")&&(b.currentDialogId="#"+b.currentDialogId),""==b.datagridId&&(b.datagridId="#"+b.refreshDatagridId),a(this).dialog({width:b.width,height:b.height,title:b.title,modal:b.modal,closed:b.closed,iconCls:b.iconCls,href:b.href,collapsible:b.collapsible,maximizable:b.maximizable,minimizable:b.minimizable,maximized:b.maximized,openAnimation:b.openAnimation,openDuration:b.openDuration,zIndex:10,buttons:[{text:"新增",iconCls:"icon-add",handler:function(){var c,d;a(b.currentDialogId).form("validate")?(c=a(b.currentDialogId).serialize(),""!=b.combotreeFields&&(d="",a.each(b.combotreeFields,function(c,e){d+="&"+e.replace(b.postfix,"")+"="+a(b.currentDialogId+' input[textboxname="'+e+'"]').combotree("getValues").join(",")+", "}),c+=d),a.ajax({url:b.saveUrl,type:"post",cache:!1,data:c,dataType:"json",contentType:"application/x-www-form-urlencoded;charset=utf-8",beforeSend:function(){a.messager.progress({text:"正在操作..."})},success:function(b){a.messager.progress("close"),msgFn(b)}})):a.messager.show({title:"提示",msg:"显示红色的字段为必填字段"})}},{text:"保存",iconCls:"icon-save",handler:function(){var c,d;a(b.currentDialogId).form("validate")?(c=a(b.currentDialogId).serialize(),""!=b.combotreeFields&&(d="",a.each(b.combotreeFields,function(c,e){d+="&"+e.replace(b.postfix,"")+"="+a(b.currentDialogId+' input[textboxname="'+e+'"]').combotree("getValues").join(",")+", "}),c+=d),a.ajax({url:b.updateUrl,type:"post",data:c,dataType:"json",contentType:"application/x-www-form-urlencoded;charset=utf-8",beforeSend:function(){a.messager.progress({text:"正在操作..."})},success:function(b){a.messager.progress("close"),msgFn(b)}})):a.messager.show({title:"提示",msg:"显示红色的字段为必填字段"})}},{text:"提交流程",iconCls:"icon-redo",handler:function(){var c,d;a(b.currentDialogId).form("validate")?(c=a(b.currentDialogId).serialize(),""!=b.combotreeFields&&(d="",a.each(b.combotreeFields,function(c,e){d+="&"+e.replace(b.postfix,"")+"="+a(b.currentDialogId+' input[textboxname="'+e+'"]').combotree("getValues").join(",")+", "}),c+=d),a.ajax({url:b.processUpdateUrl,type:"post",data:c,dataType:"json",contentType:"application/x-www-form-urlencoded;charset=utf-8",beforeSend:function(){a.messager.progress({text:"正在操作..."})},success:function(b){a.messager.progress("close"),msgFn(b)}})):a.messager.show({title:"提示",msg:"显示红色的字段为必填字段"})}},{text:"退回流程",iconCls:"icon-undo",handler:function(){if(a(b.currentDialogId).form("validate")){var c=a(b.currentDialogId).serialize();a.ajax({url:b.processRollBackUrl,type:"post",data:c,dataType:"json",contentType:"application/x-www-form-urlencoded;charset=utf-8",beforeSend:function(){a.messager.progress({text:"正在操作..."})},success:function(b){a.messager.progress("close"),msgFn(b)}})}else a.messager.show({title:"提示",msg:"显示红色的字段为必填字段"})}},{text:"上传并导入",iconCls:"icon-sys",handler:function(){var c,d;a(b.currentDialogId).form("validate")?(c=a(b.currentDialogId).serialize(),""!=b.combotreeFields&&(d="",a.each(b.combotreeFields,function(c,e){d+="&"+e.replace(b.postfix,"")+"="+a(b.currentDialogId+' input[textboxname="'+e+'"]').combotree("getValues").join(",")+", "}),c+=d),a.ajax({url:b.url,type:"post",data:c,dataType:"json",contentType:"application/x-www-form-urlencoded;charset=utf-8",beforeSend:function(){a.messager.progress({text:"正在操作..."})},success:function(b){a.messager.progress("close"),msgFn(b)}})):a.messager.show({title:"提示",msg:"显示红色的字段为必填字段"})}},{text:"取消",iconCls:"icon-cancel",handler:function(){a(b.currentDialogId).dialog("close").form("clear")}}],onLoad:function(){a(this).trigger(topJUI.eventType.initUI.form)},onOpen:function(){var c=a(b.currentDialogId).dialog("options").href;a.get(ctx+"/system/authAccess/getDetailByRoleIdAndUrl",function(d){if(c.indexOf("action=edit")>0)if(1==b.processDeal){var e=a.getUrlStrParam(c,"uuid");a.get(b.getDetailUrl+"?uuid="+e,function(a){var b=parent.$("#userNameId").val();a.currentUserNameId==b?f(0,1,1,1,0,1):f(0,0,0,0,0,1)},"json")}else f(0,d.editAuth,0,0,0,1);else c.indexOf("Import")>0?f(0,0,0,0,1,1):f(1,0,0,0,0,1)},"json")},onClose:function(){a(b.currentDialogId).form("clear")}})}}(jQuery);

// topjui.dialog2.js
!function(a){a.fn.iDialog2=function(b){var d,c={currentDialogId:this.selector,width:600,height:400,title:"修改管理",modal:!1,closed:!0,iconCls:"icon-save",collapsible:!0,maximizable:!0,minimizable:!1,maximized:!1,resizable:!0,openAnimation:"show",openDuration:600,closeAnimation:"show",closeDuration:400,toolbar:this.selector+"-toolbar",buttons:this.selector+"-buttons",postfix:"Edit",combotreeFields:"",refreshTreeId:""};b=a.extend(c,b),d=getUrl("controller"),b.href=b.href?b.href+location.search:d+"edit"+location.search,a(this).dialog({width:b.width,height:b.height,title:b.title,modal:b.modal,closed:b.closed,iconCls:b.iconCls,href:b.href,collapsible:b.collapsible,maximizable:b.maximizable,minimizable:b.minimizable,maximized:b.maximized,resizable:b.resizable,openAnimation:b.openAnimation,openDuration:b.openDuration,closeAnimation:b.closeAnimation,closeDuration:b.closeDuration,zIndex:10,toolbar:b.toolbar,buttons:b.buttons,onLoad:function(){a(this).trigger(topJUI.eventType.initUI.form)},onClose:function(){a(b.currentDialogId).form("clear")}})}}(jQuery);

// topjui.form.js
!function(a){var i,j,b=new Date,c=b.getFullYear(),d=b.getMonth()+1,e=b.getDate(),f=b.getHours();b.getMinutes(),b.getSeconds(),a.fn.iTextbox=function(b){var c={width:"auto",height:22,type:"text",multiline:!1,readonly:!1,disabled:!1,iconCls:"",buttonText:"",buttonIcon:"",required:!1,missingMessage:"必填",onChange:function(){}};b=a.extend(c,b),a(this).textbox({width:b.width,height:b.height,type:b.type,multiline:b.multiline,readonly:b.readonly,disabled:b.disabled,iconCls:b.iconCls,buttonText:b.buttonText,buttonIcon:b.buttonIcon,required:b.required,missingMessage:b.missingMessage,onChange:b.onChange})},a.fn.iNumberspinner=function(b){var g={min:0,max:1e4,width:"",editable:!0,defaultValueType:"",value:"",min:0,max:999999999,required:!1};b=a.extend(g,b),"currentYear"==b.defaultValueType?(b.value=c,b.min=1900,b.max=2200):"currentSeason"==b.defaultValueType?(1==d||2==d||3==d?b.value=1:4==d||5==d||6==d?b.value=2:7==d||8==d||9==d?b.value=3:(10==d||11==d||12==d)&&(b.value=4),b.min=1,b.max=4):"currentMonth"==b.defaultValueType?(b.value=d,b.min=1,b.max=12):"currentDay"==b.defaultValueType?(b.value=e,b.min=1,b.max=31):"currentHour"==b.defaultValueType&&(b.value=f,b.min=0,b.max=24),a(this).numberspinner({min:b.min,max:b.max,width:b.width,editable:b.editable,value:b.value,min:b.min,max:b.max,required:b.required})},a.fn.iDatebox=function(b){var c={required:!1,editable:!0,parser:function(a){return new Date(Date.parse(a.replace(/-/g,"/")))},formatter:function(a){function b(a){return(10>a?"0":"")+a}var c=a.getFullYear(),d=a.getMonth()+1,e=a.getDate();return c+"-"+b(d)+"-"+b(e)},value:""};b=a.extend(c,b),a(this).datebox({required:b.required,editable:b.editable})},a.fn.iNumberbox=function(b){var c={min:0,precision:2,required:!1};b=a.extend(c,b),a(this).numberbox({min:b.min,precision:b.precision,decimalSeparator:b.decimalSeparator,groupSeparator:b.groupSeparator,prefix:b.prefix,required:b.required})},a.fn.iLinkbutton=function(b){var c={iconCls:"icon-edit",plain:!1};b=a.extend(c,b),a(this).linkbutton(b)},a.fn.iMenubutton=function(b){var c={iconCls:"icon-save",hasDownArrow:!1};b=a.extend(c,b),getTabWindow().$(this).menubutton({iconCls:b.iconCls,hasDownArrow:b.hasDownArrow,menu:b.menu})},a.fn.iValidatebox=function(b){var c={required:!0,validType:"email"};b=a.extend(c,b),a(this).validatebox({required:b.required,validType:b.validType})},a.fn.iCombobox=function(b){var c={width:"auto",height:22,url:ctx+"/system/codeItem/getListByCodesetidAndLevelid?codeSetId={codeSetId}&levelId={levelId}",data:"",codeSetId:0,pid:0,valueField:"value",textField:"text",editable:!1,panelHeight:44,onSelect:i,formatter:j,required:!1};b=a.extend(c,b),b.data&&(b.url=""),b.codeSetId&&(b.url=b.url.replace("{codeSetId}",b.codeSetId).replace("{levelId}",b.levelId)),a(this).combobox({width:b.width,height:b.height,url:b.url,data:b.data,valueField:b.valueField,textField:b.textField,editable:b.editable,panelHeight:b.panelHeight,onSelect:b.onSelect,formatter:b.formatter,required:b.required})},i=function(a){console.log(a)},j=function(a){return 0==a?a.text:a.text},a.fn.iAutoComplete=function(b){var c={selector:this.selector,url:ctx+"/system/user/getListByUserName?userName=",valueField:"userNameId",textField:"userName",width:420,fieldId:"userNameId",required:!1};b=a.extend(c,b),a(this).combobox({valueField:b.valueField,textField:b.textField,width:b.width,required:b.required,onChange:function(c){null!=c&&a(this).combobox("reload",b.url+encodeURI(encodeURI(c)))},onSelect:function(c){a.messager.confirm("确认","你选择的人员是："+c.userName,function(d){if(d){var e=c.userName.indexOf("(cni23");a(b.selector).combobox("setValue",c.userName.substring(0,e)),a(b.selector).combobox("hidePanel"),a(b.fieldId).val(c.userNameId)}else a(b.selector).combobox("setValue","")})},onHidePanel:function(){""==a(b.fieldId).val()&&a(b.selector).combobox("setText","")}})}}(jQuery);

// topjui.layout.js
!function(a){a.fn.iTabs=function(b){var c={title:"",closable:!0,iconCls:"",content:"",border:!1,fit:!0};b=a.extend(c,b),a(this).tabs({title:b.title,closable:b.closable,iconCls:b.iconCls,content:b.content,border:b.border,fit:b.fit,onLoad:function(){a(this).trigger(topJUI.eventType.initUI.base)}})},a.extend(a.fn.tabs.methods,{myAdd:function(b,c){return b.each(function(){a(this).tabs("add",c),a(this).trigger(topJUI.eventType.initUI.base)})}})}(jQuery);

// topjui.menu.js
!function(a){a.fn.iMenu=function(b){function d(b,c){var e,f,g,d=a("#"+c).treegrid("getSelected");switch(b.name){case"add":for(a("#"+b.dialogId).dialog("open"),e=b.treegridParam.split(","),f={},g=0;g<e.length;g++)f[e[g]]=d[e[g]];return f.pid=d.id,setTimeout(function(){a("#"+b.dialogId).form("load",f)},100),!1;case"edit":return a("#"+b.dialogId).dialog("open"),setTimeout(function(){a("#"+b.dialogId).form("load",b.dialogUrl.replace("{uuid}",d.uuid))},100),!1;case"refresh":a("#"+c).treegrid("reload",d.id);break;case"remove":a.messager.confirm("提示","确定要删除吗？",function(b){b&&a.ajax({url:ctx+"/System/Menu/delete",type:"post",data:{uuids:"'"+d.uuid+"'"},beforeSend:function(){a.messager.progress({text:"正在操作..."})},success:function(b){a.messager.progress("close"),b>0?(a.messager.show({title:"提示",msg:"操作成功"}),a(c).treegrid("reload",d.pid)):a.messager.alert("操作失败！","未知错误或没有任何修改，请重试！","warning")}})})}}var c={menuId:this.selector,width:600,height:400,title:"修改管理",modal:!1,closed:!0,iconCls:"icon-save",collapsible:!0,maximizable:!0,minimizable:!1,maximized:!1,openAnimation:"show",openDuration:600,postfix:"Edit",combotreeFields:"",refreshTreeId:"",datagridId:"datagrid",treegridId:"treegrid",editDialogId:"editDialog"};b=a.extend(c,b),a(b.menuId).menu({onClick:function(c){var e,f;a(b.menuId+" .menu-item").each(function(){e=getOptionsJson(a(this)),c.name==e.name&&(f=e)}),d(f,b.treegridId)}})}}(jQuery);

// topjui.plugins.js
+function(a){"use strict";a(document).on(topJUI.eventType.initUI.form,function(){a('[data-toggle="topjui-textbox"]').each(function(){var c=a(this),d=getOptionsJson(c);d.readonly?d.buttonText="只读":d.disabled&&(d.buttonText="禁止"),c.iTextbox(d)}),a('[data-toggle="topjui-numberspinner"]').each(function(){var c=a(this),d=getOptionsJson(c);c.iNumberspinner(d)}),a('[data-toggle="topjui-numberbox"]').each(function(){var c=a(this),d=c.data();c.iNumberbox(d)}),a('[data-toggle="topjui-datebox"]').each(function(){var c=a(this),d=getOptionsJson(c);c.iDatebox(d)}),a('[data-toggle="topjui-combobox"]').each(function(){var c=a(this),d=getOptionsJson(c);c.iCombobox(d)}),a('[data-toggle="topjui-combotree"]').each(function(){var c=a(this),d=getOptionsJson(c);c.iCombotree(d)}),a('[data-toggle="topjui-textarea"]').each(function(){var c=a(this),d=getOptionsJson(c);d.multiline=!0,null==d.width&&(d.width=420),null==d.height&&(d.height=66),c.iTextbox(d)}),a('[data-toggle="topjui-kindeditor"]').each(function(){var e,c=a(this),d=getOptionsJson(c);d.items&&(d.items=d.items.replaceAll("'","").replaceAll(" ","").split(",")),d.afterUpload&&(d.afterUpload=d.afterUpload.toFunc()),d.afterSelectFile&&(d.afterSelectFile=d.afterSelectFile.toFunc()),d.confirmSelect&&(d.confirmSelect=d.confirmSelect.toFunc()),e={font:[],span:[".color",".background-color",".font-size",".font-family"],div:[".margin",".padding",".text-align"],table:["align","width"],"td,th":["align","valign","width","height","colspan","rowspan"],a:["href","target","name"],embed:["src","width","height","type","loop","autostart","quality",".width",".height","align","allowscriptaccess"],img:["src","width","height","border","alt","title","align",".width",".height",".border"],"p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6":["class","align",".text-align",".color",".font-weight",".font-style",".text-decoration",".vertical-align",".text-indent",".margin-left"],pre:["class"],hr:["class",".page-break-after"],"br,tbody,tr,strong,b,sub,sup,em,i,u,strike,s,del":[]},KindEditor.create(c,{width:d.width||700,pasteType:d.pasteType,minHeight:d.minHeight||260,autoHeightMode:d.autoHeight||!1,items:"simple"==d.mode?["source","fontname","fontsize","|","forecolor","hilitecolor","bold","italic","underline","removeformat","|","justifyleft","justifycenter","justifyright","insertorderedlist","insertunorderedlist","|","emoticons","image","insertfile","link"]:KindEditor.options.items,uploadJson:d.uploadJson||ctx+"/system/attachment/kindeditorUpload",fileManagerJson:d.fileManagerJson||ctx+"/Static/topjui/plugins/kindeditor/jsp/file_manager_json.jsp",allowFileManager:d.allowFileManager||!0,fillDescAfterUploadImage:d.fillDescAfterUploadImage||!0,afterUpload:d.afterUpload,afterSelectFile:d.afterSelectFile,X_afterSelect:d.confirmSelect,htmlTags:e,cssPath:[ctx+"/Static/topjui/plugins/kindeditor/editor-content.css",ctx+"/Static/topjui/plugins/kindeditor/plugins/code/prettify.css"],afterBlur:function(){this.sync()}})}),a('[data-toggle="topjui-upload"]').each(function(){var c=a(this),d=getOptionsJson(c);setTimeout(function(){var b=KindEditor.uploadbutton({button:KindEditor(c)[0],fieldName:"imgFile",url:d.url||ctx+"/system/attachment/kindeditorUpload?dir=file&module=article&category=news&pid=11111111111111111111111111111111",afterUpload:function(b){if(0===b.error){console.log(b);var c=KindEditor.formatUrl(b.url,"absolute");a("#"+d.fieldid).textbox("setText",c),a("#"+d.fieldid).textbox("setValue",c),a("#attachTable").append('<tr><td class="label"></td><td class="label" style="text-align:left;white-space:nowrap;"><a href="'+c+'" target="_blank">'+b.fileName+'</a></td><td class="label"></td><td class="label"></td><td class="label"></td></tr>')}else alert(b.message)},afterError:function(a){alert("自定义错误信息: "+a)}});b.fileBox.change(function(){b.submit()})},500)})}),a(document).on(topJUI.eventType.initUI.base,function(){setTimeout(function(){getTabWindow().$('[data-toggle="topjui-datagrid"]').each(function(){var c=a(this),d=getOptionsJson(c),e=[];getTabWindow().$("th").each(function(){e.push(strToJson("{"+this.getAttribute("data-options")+"}"))}),d.columns=[e],c.attr("id",d.id),getTabWindow().$("#"+d.id).iDatagrid(d)}),getTabWindow().$('[data-toggle="topjui-treegrid"]').each(function(){var c=a(this),d=getOptionsJson(c),e=[];c.find("th").each(function(){e.push(strToJson("{"+this.getAttribute("data-options")+"}"))}),d.columns=[e],c.attr("id",d.id),getTabWindow().$("#"+d.id).iTreegrid(d)}),getTabWindow().$('[data-toggle="topjui-menu"]').each(function(){var c=a(this),d=getOptionsJson(c);c.attr("id",d.id),getTabWindow().$("#"+d.id).iMenu(d)}),getTabWindow().$('[data-toggle="topjui-datagrid2"]').each(function(){var c=a(this),d=getOptionsJson(c),e=[];c.find("th").each(function(){e.push(strToJson("{"+this.getAttribute("data-options")+"}"))}),d.columns=[e],c.attr("id",d.id),getTabWindow().$("#"+d.id).iDatagrid2(d)}),getTabWindow().$('[data-toggle="topjui-dialog"]').each(function(){var b=a(this),c=getOptionsJson(b),d=b.attr("href");void 0!=d?(c.href=d,getTabWindow().$("body").append('<div id="'+c.id+'"></div>'),getTabWindow().$("#"+c.id).iDialog(c),b.on("click",function(){return getTabWindow().$("#"+c.id).dialog("open"),!1})):(b.attr("id",c.id),getTabWindow().$("#"+c.id).iDialog(c))}),getTabWindow().$('[data-toggle="topjui-dialog2"]').each(function(){var b=a(this),c=getOptionsJson(b),d=b.attr("href");void 0!=d?(c.href=d,getTabWindow().$("body").append('<div id="'+c.id+'"></div>'),getTabWindow().$("#"+c.id).iDialog2(c),b.on("click",function(){return getTabWindow().$("#"+c.id).dialog2("open"),!1})):(b.attr("id",c.id),getTabWindow().$("#"+c.id).iDialog2(c))}),getTabWindow().$('[data-toggle="topjui-menubutton"]').each(function(){var b=a(this),c=getOptionsJson(b),d={};"add"==c.component?(d={iconCls:"icon-add"},c=a.extend(d,c),b.on("click",function(){getTabWindow().addHandler(c)})):"addChild"==c.component?(d={iconCls:"icon-add"},c=a.extend(d,c),b.on("click",function(){getTabWindow().addChildHandler(c)})):"edit"==c.component?(d={iconCls:"icon-edit"},c=a.extend(d,c),b.on("click",function(){getTabWindow().editHandler(c)})):"delete"==c.component?(d={iconCls:"icon-delete"},c=a.extend(d,c),b.on("click",function(){getTabWindow().deleteHandler(c)})):"search"==c.component?(d={iconCls:"icon-search"},c=a.extend(d,c),b.on("click",function(){getTabWindow().searchHandler(c)})):"advanceSearch"==c.component?(d={iconCls:"icon-find",href:"/system/search/advanceSearch"},c=a.extend(d,c),b.on("click",function(){getTabWindow().advanceSearchHandler(c)})):"export"==c.component&&(d={iconCls:"icon-table_go"},c=a.extend(d,c),b.on("click",function(){getTabWindow().exportHandler(c)})),a(this).iMenubutton(c)}),getTabWindow().$('[data-toggle="topjui-linkbutton"]').each(function(){var c=a(this),d=getOptionsJson(c);c.iLinkbutton(d),"ajaxForm"==d.component&&c.on("click",function(){var c,e,b={gridId:"datagrid",dialogId:"editDialog"};d=a.extend(b,d),d.datagridId?c=d.datagridId:d.treegridId&&(c=d.treegridId),getTabWindow().$("#"+d.dialogId).form("validate")?(d.formData=getTabWindow().$("#"+d.dialogId).serialize(),void 0!=d.combotreeFields&&(e="",a.each(d.combotreeFields,function(a,b){e+="&"+b.replace(d.postfix,"")+"="+getTabWindow().$("#"+d.dialogId+' input[textboxname="'+b+'"]').combotree("getValues").join(",")+", "}),d.formData+=e),getTabWindow().doAjax(d),getTabWindow().$("#"+d.dialogId).dialog("close"),d.datagridId?getTabWindow().$("#"+c).datagrid("reload"):d.treegridId&&getTabWindow().$("#"+c).treegrid("reload")):showMessage({statusCode:300,title:"温馨提示",message:"显示红色的字段为必填字段"})})}),getTabWindow().$('[data-toggle="topjui-tree"]').each(function(){var c=a(this),d=getOptionsJson(c);c.attr("id",d.id),getTabWindow().$("#"+d.id).iTree(d)}),getTabWindow().$('[data-toggle="topjui-echarts"]').each(function(){var c=a(this),d=getOptionsJson(c),e=getTabWindow().document.getElementById(c[0].id),f=echarts.init(e);f.setOption({title:{text:""},tooltip:{},legend:{data:[]},series:[]}),a.ajax({url:d.url,type:"post",dataType:"json",success:function(a){("bar"==d.type||"line"==d.type)&&f.setOption({title:{text:a.title},xAxis:{data:a.categories},yAxis:{},legend:{data:a.legend},series:a.series}),"pie"==d.type&&f.setOption({title:{text:a.title,x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:a.legend,series:a.series}),"gauge"==d.type&&f.setOption({tooltip:{formatter:"{a} <br/>{b} : {c}%"},series:[{name:"业务指标",type:"gauge",detail:{formatter:"{value}%"},data:[{value:17.1,name:"党员发展率"}]}]})},error:function(){alert("获取图表数据失败!"),f.hideLoading()}})})},1e3)}),a(document).on(topJUI.eventType.initUI.advanceSearchForm,function(){var f,c=a.cookie("fieldNameStr").split(","),d=a.cookie("colNameStr").split(","),e=[];for(f=0;f<d.length;f++)e.push({value:c[f],text:d[f]});a(".field:last").combobox({textField:"text",valueField:"value",data:e,editable:!1}),a(".op:last").combobox({textField:"text",valueField:"value",data:[{text:"包含",value:"contains",selected:!0},{text:"等于",value:"equal"},{text:"不等于",value:"notequal"},{text:"大于",value:"greater"},{text:"大于或等于",value:"greaterorequal"},{text:"小于",value:"less"},{text:"小于或等于",value:"lessorequal"},{text:"以...开头",value:"beginwith"},{text:"以...结尾",value:"endwith"}],width:100,panelHeight:198,editable:!1}),a(".value:last").textbox({}),a(".join:last").combobox({textField:"text",valueField:"value",data:[{text:"并且",value:"and",selected:!0},{text:"或者",value:"or"}],width:70,panelHeight:44,editable:!1}),a("#addCondition").menubutton({iconCls:"icon-add",hasDownArrow:!1}),a(".deleteCondition:last").menubutton({iconCls:"icon-delete",hasDownArrow:!1}),a(".deleteCondition:last").on("click",function(){var b=a(".deleteCondition").index(this)+1;getTabWindow().$("#advanceSearchTable tr:eq("+b+")").remove()})})}(jQuery);

// topjui.tree.js
!function(a){a.fn.iTree=function(b){var c={treeId:this.selector,url:ctx+"/system/codeItem/getListByCodesetidAndLevelid?codeSetId={codeSetId}&levelId={levelId}",expandUrl:ctx+"/system/codeItem/getListByPid?pid={pid}",lines:!1,animate:!0,border:!1,clickEvent:"clickEventName",queryParams:{},onContextMenu:"",refreshDatagridId:"#datagrid"};b=a.extend(c,b),b.url=-1==b.url.indexOf("codeSetId")?b.url+"?codeSetId="+b.codeSetId+"&levelId="+b.levelId:b.url.replace("{codeSetId}",b.codeSetId).replace("{levelId}",b.levelId),""==b.treeId&&(b.treeId=a(this).context),a(this).tree({url:b.url,lines:b.lines,animate:b.animate,border:b.border,onContextMenu:b.onContextMenu,onBeforeExpand:function(c){a(b.treeId).tree("options").url=b.expandUrl.replace("{pid}",c.id)},onClick:function(c){var d,e;"postCodeItemIdAndRefreshDatagrid"==b.clickEvent?(d=a(b.refreshDatagridId),e=d.datagrid("options").queryParams,newQueryParams=b.queryParams,newQueryParams.codeSetId=c.codesetid,newQueryParams.codeItemId=c.id,newQueryParams.pid=c.pid,newQueryParams.code=c.code,d.datagrid("options").queryParams=a.extend({},e,newQueryParams),d.datagrid("reload")):"postTreeParamsAndRefreshDatagrid"==b.clickEvent?(d=a(b.refreshDatagridId),e=d.datagrid("options").queryParams,newQueryParams=b.queryParams,newQueryParams.codeSetId=c.codesetid,newQueryParams.codeItemId=c.id,newQueryParams.id=c.id,newQueryParams.pid=c.pid,newQueryParams.text=c.text,newQueryParams.code=c.code,d.datagrid("options").queryParams=a.extend({},e,newQueryParams),d.datagrid("reload")):"closed"==c.state?a(b.treeId).tree("expand",c.target):a(b.treeId).tree("collapse",c.target)},onLoadSuccess:function(){setTimeout(function(){var c=a(b.treeId).tree("getRoot");a(b.treeId).tree("expand",c.target)},1e3)}})}}(jQuery);

// topjui.treegrid.js
!function(a){a.fn.iTreegrid=function(b){var c={gridId:this.selector,treegridContextId:"treegridContext",url:ctx+"/system/codeItem/getListByCodesetidAndLevelid",queryParams:{codeSetId:a.getUrlParam("codeSetId"),levelId:a.getUrlParam("levelId")},onBeforeExpandUrl:ctx+"/system/codeItem/getListByPid",idField:"id",treeField:"text",border:!1,loadMsg:"数据加载中,请稍后...",toolbar:this.selector+"-toolbar",pagination:!0,pageNumber:1,pageSize:1,pageList:[10,20,30,40,50],animate:!0,columns:[[{field:"text",title:"名称"},{field:"codeSetId",title:"体系代码",width:100},{field:"id",title:"编号"},{field:"pid",title:"父级编号"},{field:"levelId",title:"层级",width:100},{field:"sort",title:"排序",width:100},{field:"code",title:"代码",width:100},{field:"status",title:"状态",width:100}]],onClickRow:function(){}};b=a.extend(c,b),a(this).treegrid({url:b.url,idField:b.idField,treeField:b.treeField,fit:!0,fitColumns:!0,toolbar:b.toolbar,pagination:!0,pageNumber:1,pageSize:20,pageList:[10,20,30,40,50],animate:b.animate,columns:b.columns,border:b.border,loadMsg:b.loadMsg,onBeforeExpand:function(c){a(this).treegrid("options").url=replaceUrlParamValueByBrace(b.expandUrl,c)},onLoadSuccess:function(){var c=a(b.gridId).treegrid("getRoot");a(b.gridId).treegrid("expand",c.id),a(this).treegrid("options").url=b.url},onContextMenu:function(c,d){c.preventDefault(),a(this).treegrid("select",d[b.idField]),a("#"+b.treegridContextId).menu("show",{left:c.pageX,top:c.pageY})},onClickRow:function(c){var d,e,f,g,h,i,j;if(b.refreshDatagridId)for(d=b.refreshDatagridId.split(","),e={},f=0;f<d.length;f++)g=a("#"+d[f]),h=g.datagrid("options").queryParams,b.gridParam&&(e=getSelectedRowJson(b.gridParam,c)),g.datagrid("options").queryParams=a.extend({},h,e),g.datagrid("load");else if(b.refreshTreegridId)for(i=b.refreshTreegridId.split(","),f=0;f<i.length;f++)j=a("#"+i[f]),h=j.treegrid("options").queryParams,b.gridParam&&(e=getSelectedRowJson(b.gridParam,c)),j.treegrid("options").queryParams=a.extend({},h,e),j.treegrid("load")}})}}(jQuery);

// topjui.window.js
!function(a){a.fn.myWindow=function(b){function e(b,c){var d=a('<div region="center" border="false" style="padding:5px;"></div>').html(b);a('<div class="easyui-layout" fit="true"></div>').append(d).append('<div region="south" border="false" style="padding-top:5px;height:40px; overflow:hidden; text-align:center;background:#fafafa;border-top:#eee 1px solid;">  <a iconCls="icon-ok">确定</a><a iconCls="icon-cancel">取消</a></div>').appendTo(a("#w").empty()).layout(),a(".easyui-layout a[iconCls]").linkbutton(),a('a[iconCls="icon-cancel"]').click(function(){a("#w").window("close")}),a('a[iconCls="icon-ok"]').unbind("click").click(c)}var d,c={width:500,height:400,iconCls:"",collapsible:!1,minimizable:!1,maximizable:!1,resizable:!1,title:"窗口标题",modal:!0,submit:function(){alert("写入执行的代码。")},html:""};b=a.extend(c,b),d=b.html,a("#w").window({title:b.title,width:b.width,height:b.height,content:e(d,b.submit),collapsible:b.collapsible,minimizable:b.minimizable,maximizable:b.maximizable,modal:b.modal,iconCls:b.iconCls}).window("open")}}(jQuery);
